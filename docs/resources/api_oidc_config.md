---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "cockroach_api_oidc_config Resource - terraform-provider-cockroach"
subcategory: ""
description: |-
  Configuration to allow external OIDC providers to issue tokens for use with CC API.
---

# cockroach_api_oidc_config (Resource)

Configuration to allow external OIDC providers to issue tokens for use with CC API.

## Example Usage

```terraform
resource "cockroach_api_oidc_config" "example" {
  issuer   = "https://accounts.google.com"
  audience = "test_audience"
  jwks     = "{\"keys\":[{\"alg\":\"RS256\",\"e\":\"AQAB\",\"kid\":\"test_kid1\",\"kty\":\"RSA\",\"n\":\"09lq1lCEuteonwDJOhGTDak11ThplZuC9JEWQNdBnBSQwlkJQIE7A7nTBO0xTibcsh2HwYkC-N_Gs1jP4iwN3dRqnu5FwG2ct5mY8KLwJiHzToFC0MKenSFQCy0FviNtOnpiObcUlDvR2NDeNtMl_6SPzcQEt7GUTBBYZgoAxPmOgevki6ZNO6Y86xFqx3y6v8EPwW010AiC60r4AHGCTBhYF4uqmq5JH2UU4dDh9Udc-9LZxlSqPwJvnKDG2GjcnD8TsU3wjfEM_nRmx3dnXsrZUXYfNGtdv5dlHywf5AhkJmTavqcsJkgrNA-PNBghFMcCR816_kCIkCYWLWC5vQ\"}]}"
  claim    = "sub"
  identity_map = [
    {
      token_identity = "token_identity"
      cc_identity    = "cc_identity"
      is_regex       = false
    },
    {
      token_identity = "(.*)"
      cc_identity    = "\\1@example.com"
      is_regex       = true
    },
  ]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `audience` (String) The audience that CC API should accept for this API OIDC Configuration.
- `issuer` (String) The issuer of tokens for the API OIDC Configuration. Usually this is a url.
- `jwks` (String) The JSON Web Key Set used to check the signature of the JWTs.

### Optional

- `claim` (String) The JWT claim that should be used as the user identifier. Defaults to the subject.
- `identity_map` (Attributes List) The mapping rules to convert token user identifiers into a new form. (see [below for nested schema](#nestedatt--identity_map))

### Read-Only

- `id` (String) ID of the API OIDC Configuration.

<a id="nestedatt--identity_map"></a>
### Nested Schema for `identity_map`

Required:

- `cc_identity` (String) The username (email or service account id) of the CC user that the token should map to.
- `token_identity` (String) The token value that needs to be mapped.

Optional:

- `is_regex` (Boolean) Indicates that the token_principal field is a regex value.
