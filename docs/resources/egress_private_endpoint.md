---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "cockroach_egress_private_endpoint Resource - terraform-provider-cockroach"
subcategory: ""
description: |-
  Egress private endpoint for a CockroachDB Cloud cluster. Egress private endpoints allow CockroachDB Cloud clusters to connect to external services through private network connections without traversing the public internet.
  - Terraform resource docs source https://github.com/cockroachdb/terraform-provider-cockroach/blob/main/docs/resources/egress_private_endpoint.md
  - Cockroach Cloud docs https://www.cockroachlabs.com/docs/cockroachcloud/egress-private-endpoints.html
---

# cockroach_egress_private_endpoint (Resource)

Egress private endpoint for a CockroachDB Cloud cluster. Egress private endpoints allow CockroachDB Cloud clusters to connect to external services through private network connections without traversing the public internet.
- [Terraform resource docs source](https://github.com/cockroachdb/terraform-provider-cockroach/blob/main/docs/resources/egress_private_endpoint.md)
- [Cockroach Cloud docs](https://www.cockroachlabs.com/docs/cockroachcloud/egress-private-endpoints.html)

## Example Usage

```terraform
# Example: AWS endpoint for an application service
resource "cockroach_egress_private_endpoint" "aws_app_service" {
  cluster_id                = cockroach_cluster.my_aws_cluster.id
  region                    = "us-east-1"
  target_service_type       = "PRIVATE_SERVICE"
  target_service_identifier = "com.amazonaws.vpce.us-east-1.vpce-svc-01234567890abcdef"
}

# Example: GCP endpoint for an application service
resource "cockroach_egress_private_endpoint" "gcp_app_service" {
  cluster_id                = cockroach_cluster.my_gcp_cluster.id
  region                    = "us-east1"
  target_service_type       = "PRIVATE_SERVICE"
  target_service_identifier = "projects/project/regions/us-east1/serviceAttachments/0123456789abcdef"
}


# Example: AWS MSK with SASL/SCRAM authentication
resource "cockroach_egress_private_endpoint" "msk_sasl_scram" {
  cluster_id                = cockroach_cluster.my_aws_cluster.id
  region                    = "us-east-1"
  target_service_type       = "MSK_SASL_SCRAM"
  target_service_identifier = "arn:aws:kafka:us-west-2:123456789012:cluster/my-cluster/12345678-1234-1234-1234-123456789012-2"
}

# Example: AWS MSK with IAM authentication
resource "cockroach_egress_private_endpoint" "msk_iam" {
  cluster_id                = cockroach_cluster.my_aws_cluster.id
  region                    = "us-east-1"
  target_service_type       = "MSK_SASL_IAM"
  target_service_identifier = "arn:aws:kafka:us-west-2:123456789012:cluster/my-iam-cluster/87654321-4321-4321-4321-210987654321-3"
}

# Example: AWS MSK with TLS authentication
resource "cockroach_egress_private_endpoint" "msk_tls" {
  cluster_id                = cockroach_cluster.my_aws_cluster.id
  region                    = "us-east-1"
  target_service_type       = "MSK_TLS"
  target_service_identifier = "arn:aws:kafka:eu-west-1:123456789012:cluster/my-tls-cluster/abcdef12-abcd-abcd-abcd-abcdef123456-4"
}

# Example clusters (required for the examples above)
resource "cockroach_cluster" "my_aws_cluster" {
  name           = "my-aws-cluster"
  cloud_provider = "AWS"
  plan           = "ADVANCED"
  dedicated = {
    storage_gib      = 15
    num_virtual_cpus = 4
  }
  regions = [
    {
      name       = "us-east-1"
      node_count = 1
    }
  ]
}

resource "cockroach_cluster" "my_gcp_cluster" {
  name           = "my-gcp-cluster"
  cloud_provider = "GCP"
  plan           = "ADVANCED"
  dedicated = {
    storage_gib      = 15
    num_virtual_cpus = 4
  }
  regions = [
    {
      name       = "us-east1"
      node_count = 1
    }
  ]
}

# Outputs to show the created endpoint information
output "app_service_endpoint_id" {
  description = "The ID of the app service egress private endpoint"
  value       = cockroach_egress_private_endpoint.aws_app_service.id
}

output "app_service_endpoint_address" {
  description = "The address of the app service egress private endpoint"
  value       = cockroach_egress_private_endpoint.aws_app_service.endpoint_address
}

output "app_service_connection_id" {
  description = "The connection ID of the app service egress private endpoint"
  value       = cockroach_egress_private_endpoint.aws_app_service.endpoint_connection_id
}

output "msk_endpoints" {
  description = "Information about MSK egress private endpoints"
  value = {
    sasl_scram = {
      id      = cockroach_egress_private_endpoint.msk_sasl_scram.id
      address = cockroach_egress_private_endpoint.msk_sasl_scram.endpoint_address
      state   = cockroach_egress_private_endpoint.msk_sasl_scram.state
    }
    iam = {
      id      = cockroach_egress_private_endpoint.msk_iam.id
      address = cockroach_egress_private_endpoint.msk_iam.endpoint_address
      state   = cockroach_egress_private_endpoint.msk_iam.state
    }
    tls = {
      id      = cockroach_egress_private_endpoint.msk_tls.id
      address = cockroach_egress_private_endpoint.msk_tls.endpoint_address
      state   = cockroach_egress_private_endpoint.msk_tls.state
    }
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `cluster_id` (String) cluster_id identifies the cluster to which this egress private endpoint applies
- `region` (String) region represents the region that the endpoint will be created in
- `target_service_identifier` (String) target_service_identifier represents the identifier of the target service that the CockroachDB endpoint connects to. For example, this would be the Service Name for AWS, Service Attachment for GCP, or ARN for AWS MSK
- `target_service_type` (String) target_service_type represents the type of target service. Allowed values are:
  * PRIVATE_SERVICE
  * MSK_SASL_SCRAM
  * MSK_SASL_IAM
  * MSK_TLS

### Read-Only

- `endpoint_address` (String) endpoint_address is the cloud-provider generated address (either IP address or DNS name) through which the endpoint is accessible
- `endpoint_connection_id` (String) endpoint_connection_id is the cloud service-specific ID for egress private endpoints. This connection ID is visible in CockroachDB and cloud service provider consoles as "VPC endpoint ID" and is used to uniquely identify the endpoint in external configurations
- `id` (String) id is a generated ID that uniquely identifies the egress_private_endpoint for use with the CockroachDB Cloud API. This ID is generic and not specific to the cloud provider
- `state` (String) state represents the current state of the endpoint. Potential values are:
  * PENDING
  * PENDING_ACCEPTANCE
  * AVAILABLE
  * DELETING
  * DELETED
  * REJECTED
  * FAILED
  * EXPIRED

## Import

Import is supported using the following syntax:

```shell
# Import an egress private endpoint using cluster_id:endpoint_id format
terraform import cockroach_egress_private_endpoint.app_service 1f69fdd2-600a-4cfc-a9ba-16995df0d77d:87654321-1234-5678-9abc-def012345678

# Import multiple egress private endpoints
terraform import cockroach_egress_private_endpoint.msk_sasl_scram 1f69fdd2-600a-4cfc-a9ba-16995df0d77d:12345678-abcd-efgh-ijkl-mnopqrstuvwx
terraform import cockroach_egress_private_endpoint.msk_iam 1f69fdd2-600a-4cfc-a9ba-16995df0d77d:abcdef12-3456-7890-abcd-ef1234567890
terraform import cockroach_egress_private_endpoint.msk_tls 1f69fdd2-600a-4cfc-a9ba-16995df0d77d:fedcba98-7654-3210-fedc-ba9876543210
```
