---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "cockroach_jwt_issuer Resource - terraform-provider-cockroach"
subcategory: ""
description: |-
  Configuration to manage external JSON Web Token (JWT) Issuers for authentication to the CockroachDB Cloud API.
---

# cockroach_jwt_issuer (Resource)

Configuration to manage external JSON Web Token (JWT) Issuers for authentication to the CockroachDB Cloud API.

## Example Usage

```terraform
resource "cockroach_jwt_issuer" "example" {
  issuer_url = "https://accounts.google.com"
  audience   = "test_audience"
  jwks       = "{\"keys\":[{\"alg\":\"RS256\",\"e\":\"AQAB\",\"kid\":\"test_kid1\",\"kty\":\"RSA\",\"n\":\"09lq1lCEuteonwDJOhGTDak11ThplZuC9JEWQNdBnBSQwlkJQIE7A7nTBO0xTibcsh2HwYkC-N_Gs1jP4iwN3dRqnu5FwG2ct5mY8KLwJiHzToFC0MKenSFQCy0FviNtOnpiObcUlDvR2NDeNtMl_6SPzcQEt7GUTBBYZgoAxPmOgevki6ZNO6Y86xFqx3y6v8EPwW010AiC60r4AHGCTBhYF4uqmq5JH2UU4dDh9Udc-9LZxlSqPwJvnKDG2GjcnD8TsU3wjfEM_nRmx3dnXsrZUXYfNGtdv5dlHywf5AhkJmTavqcsJkgrNA-PNBghFMcCR816_kCIkCYWLWC5vQ\"}]}"
  claim      = "email"
  identity_map = [
    {
      token_identity = "test_user"
      cc_identity    = "abc@example.com"
    },
    {
      token_identity = "/^sso_(.*)$"
      cc_identity    = "\\1@example.com"
    },
  ]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `audience` (String) The intended audience for consuming the JWT.
- `issuer_url` (String) The URL of the server issuing JWTs.

### Optional

- `claim` (String) Used to identify the user from the external Identity Provider. Defaults to "sub".
- `identity_map` (Attributes List) A list of mappings to map the external token identity into CockroachDB Cloud. (see [below for nested schema](#nestedatt--identity_map))
- `jwks` (String) A set of public keys (JWKS) used to verify the JWT.

### Read-Only

- `id` (String) The unique identifier of the JWT Issuer resource.

<a id="nestedatt--identity_map"></a>
### Nested Schema for `identity_map`

Required:

- `cc_identity` (String) Specifies how to map the fetched token identity to an identity in CockroachDB Cloud. In case of a regular expression for token_identity, this must contain a \1 placeholder for the matched content. Note that you will need to escape the backslash in the string as in the example usage (\\\1).
- `token_identity` (String) Specifies how to fetch external identity from the token claim. A regular expression must start with a forward slash. The regular expression must be in RE2 compatible syntax. For further details, please see https://github.com/google/re2/wiki/Syntax.

## Import

Import is supported using the following syntax:

```shell
# JWT Issuer ID can be found by running a GET against the Cockroach Cloud API to
# list all existing JWT issuers.
# https://www.cockroachlabs.com/docs/api/cloud/v1#get-/api/v1/jwt-issuers
# format: <jwt issuer id>
terraform import cockroach_jwt_issuer.my_issuer 1f69fdd2-600a-4cfc-a9ba-16995df0d77d
```
