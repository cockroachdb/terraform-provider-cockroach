---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "cockroach_physical_replication_stream Resource - terraform-provider-cockroach"
subcategory: ""
description: |-
  Physical replication stream.
---

# cockroach_physical_replication_stream (Resource)

Physical replication stream.

## Example Usage

```terraform
resource "cockroach_cluster" "pcr_example_1" {
  name           = var.cluster_name_1
  cloud_provider = var.cloud_provider
  plan           = "ADVANCED"
  dedicated = {
    storage_gib                     = var.storage_gib
    num_virtual_cpus                = var.num_virtual_cpus
    cidr_range                      = var.cidr_range_1
    supports_cluster_virtualization = true
  }
  regions = [
    for r in var.cloud_provider_regions_1 : {
      name       = r,
      node_count = var.cluster_node_count
    }
  ]
}

resource "cockroach_cluster" "pcr_example_2" {
  name           = var.cluster_name_2
  cloud_provider = var.cloud_provider
  plan           = "ADVANCED"
  dedicated = {
    storage_gib                     = var.storage_gib
    num_virtual_cpus                = var.num_virtual_cpus
    cidr_range                      = var.cidr_range_2
    supports_cluster_virtualization = true
  }
  regions = [
    for r in var.cloud_provider_regions_2 : {
      name       = r,
      node_count = var.cluster_node_count
    }
  ]
}


resource "cockroach_physical_replication_stream" "pcr_stream" {
  primary_cluster_id = cockroach_cluster.pcr_example_1.id
  standby_cluster_id = cockroach_cluster.pcr_example_2.id
  # After a PCR stream is replicating, uncomment this field to perform
  # failover. Alternatively, set failover_at.
  # failover_immediately = true
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `primary_cluster_id` (String) ID of the primary cluster, which is the replication source.
- `standby_cluster_id` (String) ID of the standby cluster, which is the replication target.

### Optional

- `failover_at` (String) The timestamp at which to perform failover. If not specified, failover will occur at the latest consistent replicated time. Cannot be used with failover_immediately.
- `failover_immediately` (Boolean) If true, failover will occur immediately at the latest consistent replicated time. Cannot be used with failover_at.

### Read-Only

- `activated_at` (String) The timestamp indicating the actual timestamp at which failover was finalized.
- `created_at` (String) The timestamp at which the replication stream was created.
- `id` (String) A unique identifier for the replication stream.
- `replicated_time` (String) The timestamp indicating the point up to which data has been replicated.
- `replication_lag_seconds` (Number) The replication lag in seconds.
- `retained_time` (String) The timestamp indicating the earliest time that the replication stream can failover to.
- `status` (String) The status of the replication stream.

## Import

Import is supported using the following syntax:

```shell
# format: <physical replication stream id>
terraform import cockroach_physical_replication_stream.my_stream 370c7f34-72e8-4238-b474-13767a579fb3
```
