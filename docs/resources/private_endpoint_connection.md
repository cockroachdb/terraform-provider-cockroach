---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "cockroach_private_endpoint_connection Resource - terraform-provider-cockroach"
subcategory: ""
description: |-
  Private endpoint connections allow customer applications to connect to a CockroachDB Cloud cluster without traversing the public internet. All application-database traffic remains within the cloud-provider network.
  Warning: Use of private endpoints requires >=v1.7.6
  If you intend to use this provider to provision private endpoints https://github.com/cockroachdb/terraform-provider-cockroach/blob/main/docs/resources/private_endpoint_connection.md:
  - AWS PrivateLink https://www.cockroachlabs.com/docs/cockroachcloud/aws-privatelink
  - GCP Private Service Connect https://www.cockroachlabs.com/docs/cockroachcloud/connect-to-your-cluster#gcp-private-service-connect
  - Azure Private Link https://www.cockroachlabs.com/docs/cockroachcloud/cockroachdb-dedicated-on-azure
  You must install/upgrade to version 1.7.6 https://github.com/cockroachdb/terraform-provider-cockroach/releases/tag/v1.7.6 or later https://registry.terraform.io/providers/cockroachdb/cockroach/latest
---

# cockroach_private_endpoint_connection (Resource)

Private endpoint connections allow customer applications to connect to a CockroachDB Cloud cluster without traversing the public internet. All application-database traffic remains within the cloud-provider network.

### _Warning_: Use of *private endpoints* requires >=v1.7.6
If you intend to use this provider to provision [private endpoints](https://github.com/cockroachdb/terraform-provider-cockroach/blob/main/docs/resources/private_endpoint_connection.md):
- [AWS PrivateLink](https://www.cockroachlabs.com/docs/cockroachcloud/aws-privatelink)
- [GCP Private Service Connect](https://www.cockroachlabs.com/docs/cockroachcloud/connect-to-your-cluster#gcp-private-service-connect)
- [Azure Private Link](https://www.cockroachlabs.com/docs/cockroachcloud/cockroachdb-dedicated-on-azure)
	
You must install/upgrade to [version 1.7.6](https://github.com/cockroachdb/terraform-provider-cockroach/releases/tag/v1.7.6) or [later](https://registry.terraform.io/providers/cockroachdb/cockroach/latest)

## Example Usage

```terraform
## Example with AWS PrivateLink

# Enable the PrivateLink service on the CockroachDB Cloud cluster.
resource "cockroach_private_endpoint_services" "services" {
  cluster_id = cockroach_cluster.my_cluster.id
}

# Create a PrivateLink endpoint and associate it with the PrivateLink Service. 
resource "aws_vpc_endpoint" "my_endpoint" {
  vpc_id             = "vpc-7fc0a543"
  service_name       = cockroach_private_endpoint_services.services.name
  vpc_endpoint_type  = "Interface"
  subnet_ids         = ["subnet-de0406d2"]
  security_group_ids = ["sg-3f238186"]
}

# Establish the connection between the endpoint and the service.
resource "cockroach_private_endpoint_connection" "connection" {
  cluster_id  = cockroach_cluster.my_cluster.id
  endpoint_id = aws_vpc_endpoint.my_endpoint.id
}

## Example with Azure Private Link

# Enable the Private Link service on the CockroachDB Cloud cluster.
resource "cockroach_private_endpoint_services" "services" {
  cluster_id = cockroach_cluster.my_cluster.id
}

# Create a private link endpoint and associate it with the Private Link Service. 
resource "azurerm_private_endpoint" "my_endpoint" {
  name                = "my_endpoint"
  location            = var.location
  resource_group_name = var.resource_group_name
  subnet_id           = azurerm_subnet.my_subnet.id
  private_service_connection {
    name                           = cockroach_private_endpoint_connection.services[0].name
    private_connection_resource_id = cockroach_private_endpoint_connection.services[0].endpoint_service_id
    is_manual_connection           = true
    request_message                = "Azure Private Link test"
  }
}

# Establish a connection between the endpoint and the service.
resource "cockroach_private_endpoint_connection" "connection" {
  cluster_id  = cockroach_cluster.my_cluster.id
  endpoint_id = azurerm_private_endpoint.my_endpoint.id
}

## Example with GCP Private Service Connect

# Enable the Private Service Connect services on the CockroachDB Cloud cluster.
resource "cockroach_private_endpoint_services" "services" {
  cluster_id = cockroach_cluster.my_cluster.id
}

# Create the GCP Private Service Connect endpoint using the GCP API or the GCP
# Console. You will need the service id to create the endpoint. You can get the
# service information by running `terraform show` and noting
# `cockroach_private_endpoint_connection.services[*].name`,
# `cockroach_private_endpoint_connection.services[*].endpoint_service_id`

# Establish a connection between the endpoint and the service.
resource "cockroach_private_endpoint_connection" "connection" {
  cluster_id  = cockroach_cluster.my_cluster.id
  endpoint_id = "6133183410995353"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `cluster_id` (String)
- `endpoint_id` (String) Client side ID of the Private Endpoint Connection.

### Read-Only

- `cloud_provider` (String) Cloud provider associated with this connection.
- `id` (String) Used with `terraform import`. Format is "<cluster ID>:<endpoint ID>".
- `region_name` (String) Cloud provider region code associated with this connection.
- `service_id` (String) Server side ID of the Private Endpoint Connection.

## Import

Import is supported using the following syntax:

```shell
# format: <cluster id>:<connection id>
terraform import cockroach_private_endpoint_connection.resource_name 1f69fdd2-600a-4cfc-a9ba-16995df0d77d:vpce-0c1308d7312217abc
```
